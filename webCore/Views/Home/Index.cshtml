﻿@{
    Layout = "_Layout";
    var categories = ViewBag.Categories as List<webCore.Models.Category>;
    var parentCategories = categories?.Where(c => c.ParentId == null).ToList();
}

<div class="container">
    <div class="row">
        <aside class="list col-md-4">
            <ul class="list-group">
                <li class="inner-title list-group-item">
                    <h3>Danh mục sản phẩm</h3>
                </li>
                @if (parentCategories != null)
                {
                    foreach (var parent in parentCategories)
                    {
                        <li class="list-group-item" onclick="toggleArrow(this)">
                            <a>@parent.Title<span class="arrow"></span></a>
                            <ul class="list-group subcategories" style="display: none;">
                                @foreach (var sub in categories.Where(c => c.ParentId == parent._id))
                                {
                                    <li class="list-group-item">
                                        <a>@sub.Title</a>
                                    </li>
                                }
                            </ul>
                        </li>
                    }
                }
            </ul>
        </aside>
            <main class="main col-md-8 p-3">
                <div class="main-banner position-relative">
                    <!-- Slideshow -->
                    <div id="bookCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="/image/image_theme1.jpg" class="d-block w-100" alt="..."/>
                                <div class="carousel-caption d-none d-md-block">
                                    <button class="btn1">Mua ngay</button>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="/image/image_theme2.jpg" class="d-block w-100" alt="..."/>
                                <div class="carousel-caption d-none d-md-block">
                                    <button class="btn2">Mua ngay</button>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="/image/image_theme3.jpg" class="d-block w-100" alt="..."/>
                                <div class="carousel-caption d-none d-md-block">
                                    <button class="btn3">Mua ngay</button>
                                </div>
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#bookCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#bookCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
                <!-- Danh sách sách -->
                <div class="row mt-5">
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image1.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Tớ Khôn Lớn Từng Ngày-46 Kỹ Năng Sống Quan Trọng</h7>
                                <p class="card-text">
                                    <span class="new-price">82,000₫</span><br>
                                    <span class="old-price">117,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image2.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Anh Mèo Vằn Và Cô Chim Én-Một Chuyện Tình</h7>
                                <p class="card-text">
                                    <span class="new-price">112,000₫</span><br>
                                    <span class="old-price">183,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image3.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Sách Âm Thanh Những Loài Vật-Dành cho bé 0-4 tuổi</h7>
                                <p class="card-text">
                                    <span class="new-price">122,000₫</span><br>
                                    <span class="old-price">156,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image4.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Sách Âm Thanh - Những Loài Vật Quanh Em</h7>
                                <p class="card-text">
                                    <span class="new-price">58,000₫</span><br>
                                    <span class="old-price">110,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image5.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Cha Mẹ Khờ Ôn Luyện Con Khôn</h7>
                                <p class="card-text">
                                    <span class="new-price">62,000₫</span><br>
                                    <span class="old-price">98,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image6.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Cùng Con Chống Nạn Bắt Nạt</h7>
                                <p class="card-text">
                                    <span class="new-price">72,000₫</span><br>
                                    <span class="old-price">144,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image7.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Phép Mầu Ở Ga Nishi-Yuigahama</h7>
                                <p class="card-text">
                                    <span class="new-price">89,000₫</span><br>
                                    <span class="old-price">116,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image8.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Sách Âm Thanh-Bé Ngoan Học Thói Quen Tốt</h7>
                                <p class="card-text">
                                    <span class="new-price">82,000₫</span><br>
                                    <span class="old-price">116,000₫</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="discount-badge">-30%</div>
                            <div class="img">
                                <img src="/image/image9.jpg" class="image card-img-top" alt="Book Cover"/>
                            </div>
                            <div class="card-body">
                                <h7 class="card-title">Ollie "Phiu Liu" kí</h7><br>
                                <span class="new-price">112,000₫</span><br>
                                <span class="old-price">116,000₫</span>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    function toggleArrow(item) {
                        var subCategoryList = item.querySelector(".subcategories");
                        var arrow = item.querySelector(".arrow");

                        if (subCategoryList.style.display === "none" || subCategoryList.style.display === "") {
                            subCategoryList.style.display = "block";
                            arrow.classList.add("open");
                        } else {
                            subCategoryList.style.display = "none";
                            arrow.classList.remove("open");
                        }
                    }
                </script>
            </main>
        </div>
    </div>
</div>
<!-- end Section One -->
