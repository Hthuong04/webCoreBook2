@model webCore.Models.CheckoutViewModel

@{
    Layout = "_Layout";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh Toán</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />
</head>
<body>
    <div class="container mt-5">
        <h2>Thông Tin Thanh Toán</h2>

        <!-- Product List -->
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Hình ảnh</th>
                    <th>Đơn giá</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Items)
                {
                    <tr>
                        <td>@item.Title</td>
                        <td>
                            @if (!string.IsNullOrEmpty(item.Image))
                            {
                                <img src="@item.Image" alt="@item.Title" style="width: 50px; height: 50px; object-fit: cover;" />
                            }
                            else
                            {
                                <span>Không có hình ảnh</span>
                            }
                        </td>
                        <td>@(item.Price * (1 - item.DiscountPercentage / 100))</td>
                        <td>@item.Quantity</td>
                        <td>@((item.Price * (1 - item.DiscountPercentage / 100)) * item.Quantity)</td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- Voucher Section -->
        @if (!string.IsNullOrEmpty(Model.VoucherDiscount))
        {
            <div class="alert alert-info">
                <strong>Khuyến mãi:</strong> Giảm @Model.VoucherDiscount %
            </div>
        }
        else
        {
            <div class="alert alert-warning">
                <strong>Khuyến mãi:</strong> Không có khuyến mãi.
            </div>
        }

        <!-- Price Summary -->
        <div class="row mt-3">
            <div class="col-md-6">
                <p><strong>Tổng tiền:</strong> @Model.TotalAmount.ToString("C")</p>
                <p><strong>Giảm giá:</strong> @Model.DiscountAmount.ToString("C")</p>
                <p><strong>Tổng tiền sau giảm:</strong> @Model.FinalAmount.ToString("C")</p>
            </div>
        </div>

        <!-- Payment Button -->
        <div class="text-center mt-3">
            <!-- Chuyển qua trang nhập thông tin thanh toán -->
            <a href="@Url.Action("PaymentInfo", "Checkout")" class="btn btn-success btn-lg">Tiến Hành Thanh Toán</a>
        </div>
    </div>
</body>
</html>
